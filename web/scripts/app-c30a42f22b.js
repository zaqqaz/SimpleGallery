/******/!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),r=a(i),o=n(4),l=a(o),s=n(5),c=a(s),u=n(18),d=a(u),f=n(24),p=a(f),v=n(30),m=a(v);angular.module("front",["parameters.config","ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","angular-cache","angularFileUpload","ngTagsInput",c["default"],d["default"],p["default"],m["default"]]).constant("toastr",toastr).constant("moment",moment).constant("alert",swal).constant("localStorage",localStorage).config(r["default"]).run(l["default"])},function(e,t,n){"use strict";function a(e,t,n,a,r,o,l,s){"ngInject";a.html5Mode({enabled:!0,requireBase:!0}),angular.extend(l.defaults,{storageMode:"localStorage",storeOnResolve:!0}),s.otherwise(i.pagesConstants.MAIN),e.debugEnabled(!0),t.useSanitizeValueStrategy(!1),o.interceptors.push("AuthInterceptor"),t.translations("ru",n),t.preferredLanguage("ru"),r.options.closeButton=!0,r.options.positionClass="toast-bottom-right"}a.$inject=["$logProvider","$translateProvider","ru","$locationProvider","toastr","$httpProvider","CacheFactoryProvider","$urlRouterProvider"],Object.defineProperty(t,"__esModule",{value:!0});var i=(n(2),n(3));t["default"]=a,e.exports=t["default"]},function(e,t){"use strict";!function(){angular.module("parameters.config",[]).constant("API_URL","http://simplegallery.vagrant/app_dev.php/api/").constant("IS_DEBUG_MODE",!0)}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MAIN:"/albums/",LOGIN:"/login"};t.pagesConstants=n;var a={CURRENT_KEY:"current",AUTH_USER_HEADER_KEY:"token",AUTH_HEADER_KEY:"Authorization"};t.userConstants=a},function(e,t){"use strict";function n(e){"ngInject"}n.$inject=["$log"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=(i(r),n(7)),l=n(8),s=a(l),c=n(9),u=a(c),d=n(10),f=a(d),p=n(12),v=a(p),m=n(14),g=a(m),h=n(15),b=n(16),y=a(b),$=angular.module("shared-components",["ngProgress","pascalprecht.translate"]).constant("ru",o.ru).service("AuthInterceptor",v["default"]).service("Loader",g["default"]).directive("clickOnce",function(){return new s["default"]}).directive("restrictInput",function(){return new u["default"]}).directive("imageViewer",f["default"]).component("loadFile",y["default"]).factory("extendExceptionHandler",h.extendExceptionHandler).config(h.exceptionConfig);t["default"]=$=$.name,e.exports=t["default"]},function(e,t){"use strict";angular.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var a=n;void 0===a&&(a=Math.min(t(e),3));var i=Math.pow(10,a),r=(e*i|0)%i;return{v:a,f:r}}var a={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],ERANAMES:["до н. э.","н. э."],ERAS:["до н. э.","н. э."],FIRSTDAYOFWEEK:0,MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","марта","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. H:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"H:mm:ss","short":"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"руб.",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru",pluralCat:function(e,t){var i=0|e,r=n(e,t);return 0==r.v&&i%10==1&&i%100!=11?a.ONE:0==r.v&&i%10>=2&&4>=i%10&&(12>i%100||i%100>14)?a.FEW:0==r.v&&i%10==0||0==r.v&&i%10>=5&&9>=i%10||0==r.v&&i%100>=11&&14>=i%100?a.MANY:a.OTHER}})}])},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"CUSTOMER INFO":"Информация о клиенте","SIGN IN":"Войти",REGISTRATION:"Регистрация",home:"Домашний",work:"Рабочий",mobile:"Мобильный",Cash:"Наличные",Credit:"Кредит",PLANNED:"Плановый",UNPLANNED:"Внеплановый",BACKLOG:"Бэклог",INVOICED:"Отгружен",CANCELLED:"Отменен при доставке",DELIVERED:"Доставлен",RETURNS:"Возврат","CHECK LOGIN AND PASSWORD":"Пожалуйста, проверьте логин и пароль","AUTH SUCCESS":"Авторизация прошла успешно!","AUTH REQUIRED":"Для доступа к данному разделу необходима авторизация","REGISTRATION SUCCESS":"Авторизация прошла успешно!","ALREADY REGISTERED":"Данный e-mail уже зарегистрирован в системе","SESSION LOST":"Сессия утеряна. Извините, придется авторизоваться заново."};t.ru=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){n(this,e),this.restrict="A",this.priority=-1,this.scope={ngClick:"&"}}return a(e,[{key:"link",value:function(e,t,n){function a(e){i?(e.preventDefault(),e.stopImmediatePropagation()):i=!0}var i,r=n.clickOnce;e.$on(r,function(){i=!1}),t.bind("click",function(e){a(e)})}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){n(this,e),this.restrict="A"}return a(e,[{key:"link",value:function(e,t,n){var a=t[0],i=new RegExp(n.restrictInput);e.$watch(function(){return a.value},function(){i.test(a.value)||(a.value="",angular.element(a).triggerHandler("input"))})}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(11),l=a(o),s=function(){function e(t,n){"ngInject";i(this,e),this._$uibModal=t,this.test="test",this.modalConfig={template:l["default"],scope:n}}return e.$inject=["$uibModal","$scope"],r(e,[{key:"openModal",value:function(){return this._$uibModal.open(this.modalConfig)}}]),e}();t["default"]=function(){return{template:'<ng-transclude ng-click="$ctrl.openModal();"></ng-transclude>',transclude:!0,controller:s,bindToController:!0,controllerAs:"$ctrl",scope:{image:"=",title:"=",description:"="}}},e.exports=t["default"]},function(e,t){e.exports='<div class="image-viewer modal-body">\n    <img ng-src="{{$ctrl.image}}" />\n    <h3 class="title">{{$ctrl.title}}</h3>\n    <div class="description">{{$ctrl.description}}</div>\n</div>'},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=function o(e,t){"ngInject";a(this,o),this.responseError=function(n){return e.$broadcast({401:i.AUTH_EVENTS.notAuthenticated,403:i.AUTH_EVENTS.notAuthorized}[n.status],n),t.reject(n)}};r.$inject=["$rootScope","$q"],t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"};t.AUTH_EVENTS=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=["ngProgressFactory",function(e){"ngInject";return e.createInstance()}],e.exports=t["default"]},function(e,t){"use strict";function n(e){"ngInject";e.decorator("$exceptionHandler",a)}function a(e,t){"ngInject";return function(n,a){e(n,a),t(n.message,"","error")}}n.$inject=["$provide"],a.$inject=["$delegate","alert"],Object.defineProperty(t,"__esModule",{value:!0}),t.exceptionConfig=n,t.extendExceptionHandler=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=(n(3),n(17)),l=a(o),s=function(){function e(t,n){"ngInject";i(this,e);var a={headers:{},url:n+this.url};this.loading=!1,this.success=!1,this.error=!1,this.uploader=new t(a),this.uploader.onAfterAddingFile=this.onAfterAddingFile.bind(this),this.uploader.onProgressItem=this.onProgressItem.bind(this),this.uploader.onSuccessItem=this.onSuccessItem.bind(this),this.uploader.onErrorItem=this.onErrorItem.bind(this)}return e.$inject=["FileUploader","API_URL"],r(e,[{key:"repeat",value:function(){this.loading=!1,this.success=!1,this.error=!1}},{key:"onAfterAddingFile",value:function(e){this.loading||(this.params&&(e.url+="?"+$httpParamSerializerJQLike(this.params)),e.upload())}},{key:"onProgressItem",value:function(e,t){this.loading=!0}},{key:"onSuccessItem",value:function(e,t){this.loading=!1,this.success=!0,this.callback&&this.callback({response:t}),this.successMessageTemplate&&(this.successMessage=this.successMessageTemplate.replace(/%(.+?)%/gi,function(e,n,a){return e=t[n]}))}},{key:"onErrorItem",value:function(e,t,n,a){console.info("onErrorItem",e,t,n,a),this.errorMessage=t.error,this.loading=!1,this.error=!0}}]),e}();t["default"]={template:l["default"],controller:s,bindings:{url:"@",params:"=",callback:"&",successMessageTemplate:"@",label:"@"}},e.exports=t["default"]},function(e,t){e.exports='<div class="load-file"\n     nv-file-drop=""\n     uploader="$ctrl.uploader">\n\n    <div class="load-file-label" ng-if="$ctrl.label">{{$ctrl.label}}</div>\n\n    <div nv-file-over=""\n         uploader="$ctrl.uploader"\n         over-class="file-over-class"\n         class="well drop-zone"\n         ng-class="{\'has-label\' : $ctrl.label}">\n        <div ng-if="!$ctrl.loading && !$ctrl.error && !$ctrl.success">\n            <input type="file" nv-file-select="" uploader="$ctrl.uploader"/>\n            <br>\n            Select or drag a file\n        </div>\n        <div ng-if="$ctrl.loading || $ctrl.error || $ctrl.success"\n             class="text-center">\n            <strong ng-if="$ctrl.loading">Загрузка<br>...</strong>\n            <strong ng-if="$ctrl.error" class="text-danger">Error<br>\n                {{$ctrl.errorMessage}}<br>\n                <a href="#" ng-click="$ctrl.repeat();">Retry</a>\n            </strong>\n            <strong ng-if="$ctrl.success" class="text-success">Loaded<br>\n                {{$ctrl.successMessage}}<br>\n                <a href="#" ng-click="$ctrl.repeat();">Load another</a>\n            </strong>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),r=a(i),o=n(22),l=a(o),s=n(23),c=a(s),u=angular.module("api",["ng-rest-api"]).config(r["default"]).service("AlbumManager",l["default"]).service("PhotoManager",c["default"]);t["default"]=u=u.name,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){"ngInject";e.setBaseRoute(t),e.endpoint("album").route("albums/:id").model(o["default"]).addHttpAction("GET","query",{isArray:!0,headersForReading:["x-total-count"]}).addHttpAction("PATCH","patch",{params:{id:"@id"}}),e.endpoint("photo").route("albums/:album_id/photos/:id").model(s["default"]).addHttpAction("GET","query",{isArray:!0,headersForReading:["x-total-count"]}).addHttpAction("POST","save",{params:{album_id:"@album_id"}}).addHttpAction("PATCH","patch",{params:{album_id:"@album_id"}})}i.$inject=["apiProvider","API_URL"],Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=a(r),l=n(21),s=a(l);t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t){var a=t.id,i=t.name,r=t.description,o=t.image;n(this,e),this.id=a,this.name=i,this.description=r,this.image=o||{}}return a(e,[{key:"beforeSave",value:function(){this.image=this.image.id}},{key:"image_url",get:function(){return this.image.path+this.image.name}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t){var a=t.id,i=t.name,r=t.description,o=t.image,l=t.album;n(this,e),this.id=a,this.name=i,this.description=r,this.album=l||{},this.image=o||{}}return a(e,[{key:"beforeSave",value:function(){this.image=this.image.id}},{key:"album_id",get:function(){return this.album.id}},{key:"image_url",get:function(){return this.image.path+this.image.name}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(20),l=(a(o),function(){function e(t,n){"ngInject";i(this,e),this.$log=t,this.api=n}return e.$inject=["$log","api"],r(e,[{key:"getById",value:function(e){return this.api.album.get({id:e})}},{key:"query",value:function(){var e=void 0===arguments[0]?{}:arguments[0];return this.api.album.query(e)}},{key:"save",value:function(e){return e.id?this.api.album.patch(e):this.api.album.save(e)}}]),e}());t["default"]=l,e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t,a){"ngInject";n(this,e),this.$log=t,this.api=a}return e.$inject=["$log","api"],a(e,[{key:"query",value:function(){var e=void 0===arguments[0]?{}:arguments[0];return this.api.photo.query(e)}},{key:"save",value:function(e){return e.id?this.api.photo.patch(e):this.api.photo.save(angular.merge(e))}}]),e}();t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),r=a(i),o=n(26),l=a(o),s=n(28),c=a(s),u=angular.module("lessons",[]).config(r["default"]).component("albumEditor",c["default"]).component("listAlbums",l["default"]);t["default"]=u=u.name,e.exports=t["default"]},function(e,t){"use strict";function n(e){"ngInject";e.state("albums",{url:"/albums/:page",template:'<list-albums class="album"></list-albums>'}),e.state("albumEditor",{url:"/album/:id",template:'<album-editor class="album"></album-editor>'})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(s){i=!0,r=s}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw r}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(27),s=a(l),c=function(){function e(t,n,a,i,o){"ngInject";r(this,e),this._AlbumManager=a,this._$state=o,this._Loader=i,this.page=n.page<=0?1:n.page,this.albums=[],this.totalCount=0,this.itemsPerPage=9,this.activate()}return e.$inject=["$log","$stateParams","AlbumManager","Loader","$state"],o(e,[{key:"activate",value:function(){var e=this;this.loadAlbums().then(function(){return e.initialized=!0})}},{key:"loadAlbums",value:function(){var e=this;return this._Loader.start(),this._AlbumManager.query({limit:this.itemsPerPage,offset:(this.page-1)*this.itemsPerPage}).then(function(t){var n=i(t,2),a=n[0],r=n[1];e.albums=a,e.totalCount=r["x-total-count"],e._Loader.complete()})}},{key:"currentPage",get:function(){return this.page},set:function(e){this._$state.go("albums",{page:e})}}]),e}();t["default"]={template:s["default"],controller:c},e.exports=t["default"]},function(e,t){e.exports='<div class="container" ng-if="$ctrl.initialized">\n    <h1>Your Albums</h1>\n    <div class="list">\n        <div class="item"\n             ui-sref="photos({albumId: album.id, page: 0})"\n             ng-repeat="album in $ctrl.albums">\n            <img ng-src="{{album.image_url}}" title="{{album.title}}"/>\n            <div class="on-hover">\n                <div class="title">{{album.name}}</div>\n                <div class="description">{{album.description}}</div>\n            </div>\n        </div>\n\n        <div class="item edit" ui-sref="albumEditor({id:\'create\'})">\n            <span class="icon glyphicon glyphicon-plus"></span>\n        </div>\n    </div>\n\n    <uib-pagination total-items="$ctrl.totalCount"\n                    items-per-page="$ctrl.itemsPerPage"\n                    ng-model="$ctrl.currentPage"></uib-pagination>\n</div>'},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(29),l=a(o),s=n(20),c=a(s),u=function(){function e(t,n,a){"ngInject";i(this,e),this._$state=t,this._AlbumManager=a,this.id=n.id,this.isCreateMode=!(!this.id||"create"!==this.id.toLowerCase()),this.savedResult=null,this.album=new c["default"]({}),this._activate()}return e.$inject=["$state","$stateParams","AlbumManager"],r(e,[{key:"_activate",value:function(){var e=this;this.isCreateMode||this._AlbumManager.getById(this.id).then(function(t){e.album=t})}},{key:"imageLoaded",value:function(e){this.album.image=e}},{key:"save",value:function(e){var t=this;if(!e.name||!e.image.id)throw new Error("Please fill the required fields");return this._AlbumManager.save(e).then(function(){return t.savedResult="SUCCESS"})["catch"](function(){return t.savedResult="FAIL"})}},{key:"reload",value:function(){return this._$state.reload()}}]),e}();t["default"]={template:l["default"],controller:u},e.exports=t["default"]},function(e,t){e.exports='<div class="back" ui-sref="albums">\n    <span class="icon glyphicon glyphicon-chevron-left"></span>\n</div>\n<div class="editor container">\n    <div ng-if="!$ctrl.savedResult">\n        <h1>Create Album</h1>\n        <form class="form-horizontal" ng-submit="$ctrl.save($ctrl.album)" role="form">\n            <div class="form-group">\n                <label class="control-label col-sm-2" for="name">Album name:</label>\n                <div class="col-sm-10">\n                    <input type="text" class="form-control" id="name" ng-model="$ctrl.album.name">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2" for="description">\n                    Album description:\n                </label>\n                <div class="col-sm-10">\n                    <textarea class="form-control" id="description" ng-model="$ctrl.album.description"></textarea>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">Image:</label>\n                <div class="col-sm-10">\n                    <load-file url="image/upload"\n                               callback="$ctrl.imageLoaded(response)"></load-file>\n                </div>\n            </div>\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <button type="submit" class="btn btn-default">Save</button>\n                </div>\n            </div>\n        </form>\n\n    </div>\n\n    <div class="saved-result" ng-if="$ctrl.savedResult == \'SUCCESS\'">\n        <p class="success"><strong>Saved successfully</strong></p>\n        <a href="" ng-click="$ctrl.reload();">Create new</a>\n    </div>\n    <div class="saved-result" ng-if="$ctrl.savedResult == \'FAIL\'">\n        <p class="fail"><strong>Error</strong></p>\n        <a href="" ng-click="$ctrl.reload();">Try again</a>\n    </div>\n</div>'},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),r=a(i),o=n(32),l=a(o),s=n(34),c=a(s),u=angular.module("template",[]).config(r["default"]).component("photoEditor",c["default"]).component("listPhotos",l["default"]);t["default"]=u=u.name,e.exports=t["default"]},function(e,t){"use strict";function n(e){"ngInject";e.state("photos",{url:"/photos/:albumId/:page",template:'<list-photos class="photo"></list-photos>'}),e.state("photoEditor",{url:"/photo/:albumId/:photoId",template:'<photo-editor class="photo"></photo-editor>'})}n.$inject=["$stateProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(s){i=!0,r=s}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw r}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(33),s=a(l),c=function(){function e(t,n,a,i,o,l){"ngInject";r(this,e),this.page=n.page<=0?1:n.page,this._PhotoManager=a,this._AlbumManager=i,this._$state=l,this.albumId=n.albumId,this._Loader=o,this.photos=[],this.totalCount=0,this.itemsPerPage=9,this.activate()}return e.$inject=["$log","$stateParams","PhotoManager","AlbumManager","Loader","$state"],o(e,[{key:"activate",value:function(){var e=this;this._AlbumManager.getById(this.albumId).then(function(t){e.album=t}),this.loadPhotos().then(function(){return e.initialized=!0})}},{key:"loadPhotos",value:function(){var e=this;return this._Loader.start(),this._PhotoManager.query({album_id:this.albumId,limit:this.itemsPerPage,offset:(this.page-1)*this.itemsPerPage||0}).then(function(t){var n=i(t,2),a=n[0],r=n[1];e.photos=a,e.totalCount=r["x-total-count"],e._Loader.complete()})}},{key:"currentPage",get:function(){return this.page},set:function(e){this._$state.go("photos",{page:e,albumId:this.albumId})}}]),e}();t["default"]={template:s["default"],controller:c},e.exports=t["default"]},function(e,t){e.exports='<div class="back" ui-sref="albums">\n    <span class="icon glyphicon glyphicon-chevron-left"></span>\n</div>\n<div class="container"  ng-if="$ctrl.initialized">\n    <div class="header">\n        <div class="col-xs-4">\n            <img ng-src="{{$ctrl.album.image_url}}" title="{{$ctrl.album.name}}"/>\n        </div>\n        <div class="col-xs-8">\n            <h1>{{$ctrl.album.name}}</h1>\n            <div class="description">{{$ctrl.album.description}}</div>\n        </div>\n    </div>\n    <div class="list">\n\n        <image-viewer image="photo.image_url"\n                      title="photo.name"\n                      description="photo.description"\n                      ng-repeat="photo in $ctrl.photos">\n            <div class="item">\n                <img ng-src="{{photo.image_url}}" title="{{photo.title}}"/>\n                <div class="on-hover">\n                    <div class="title">{{photo.name}}</div>\n                    <div class="description">{{photo.description}}</div>\n                </div>\n            </div>\n        </image-viewer>\n\n        <div class="item edit" ui-sref="photoEditor({photoId:\'create\', albumId: $ctrl.albumId})">\n            <span class="icon glyphicon glyphicon-plus"></span>\n        </div>\n    </div>\n\n    <uib-pagination total-items="$ctrl.totalCount"\n                    items-per-page="$ctrl.itemsPerPage"\n                    ng-model="$ctrl.currentPage"></uib-pagination>\n</div>'},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(35),l=a(o),s=n(21),c=a(s),u=function(){function e(t,n,a){"ngInject";i(this,e),this._$state=t,this._PhotoManager=a,this.id=n.photoId,this.isCreateMode=!(!this.id||"create"!==this.id.toLowerCase()),this.savedResult=null,this.photo=new c["default"]({}),this.photo.album.id=n.albumId,this._activate()}return e.$inject=["$state","$stateParams","PhotoManager"],r(e,[{key:"_activate",value:function(){var e=this;this.isCreateMode||this._PhotoManager.getById(this.id).then(function(t){e.photo=t})}},{key:"imageLoaded",value:function(e){this.photo.image=e}},{key:"save",value:function(e){var t=this;if(!e.name||!e.image.id)throw new Error("Please fill the required fields");return this._PhotoManager.save(e).then(function(){return t.savedResult="SUCCESS"})["catch"](function(){return t.savedResult="FAIL"})}},{key:"reload",value:function(){return this._$state.reload()}}]),e}();t["default"]={template:l["default"],controller:u},e.exports=t["default"]},function(e,t){e.exports='<div class="back" ui-sref="albums">\n    <span class="icon glyphicon glyphicon-chevron-left"></span>\n</div>\n<div class="editor container">\n    <div ng-if="!$ctrl.savedResult">\n        <h1>Create Photo</h1>\n        <form class="form-horizontal" ng-submit="$ctrl.save($ctrl.photo)" role="form">\n            <div class="form-group">\n                <label class="control-label col-sm-2" for="name">Photo name:</label>\n                <div class="col-sm-10">\n                    <input type="text" class="form-control" id="name" ng-model="$ctrl.photo.name">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2" for="description">\n                    Album description:\n                </label>\n                <div class="col-sm-10">\n                    <textarea class="form-control" id="description" ng-model="$ctrl.photo.description"></textarea>\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="control-label col-sm-2">Image:</label>\n                <div class="col-sm-10">\n                    <load-file url="image/upload"\n                               callback="$ctrl.imageLoaded(response)"></load-file>\n                </div>\n            </div>\n            <div class="form-group">\n                <div class="col-sm-offset-2 col-sm-10">\n                    <button type="submit" class="btn btn-default">Save</button>\n                </div>\n            </div>\n        </form>\n\n    </div>\n\n    <div class="saved-result" ng-if="$ctrl.savedResult == \'SUCCESS\'">\n        <p class="success"><strong>Saved successfully</strong></p>\n        <a href="" ng-click="$ctrl.reload();">Create new</a>\n    </div>\n    <div class="saved-result" ng-if="$ctrl.savedResult == \'FAIL\'">\n        <p class="fail"><strong>Error</strong></p>\n        <a href="" ng-click="$ctrl.reload();">Try again</a>\n    </div>\n</div>'}]),angular.module("front").run(["$templateCache",function(e){e.put("app/shared-components/image-viewer/image-viewer.html",'<div class="image-viewer modal-body"><img ng-src="{{$ctrl.image}}"><h3 class="title">{{$ctrl.title}}</h3><div class="description">{{$ctrl.description}}</div></div>'),e.put("app/shared-components/load-file/load-file.html",'<div class="load-file" nv-file-drop="" uploader="$ctrl.uploader"><div class="load-file-label" ng-if="$ctrl.label">{{$ctrl.label}}</div><div nv-file-over="" uploader="$ctrl.uploader" over-class="file-over-class" class="well drop-zone" ng-class="{\'has-label\' : $ctrl.label}"><div ng-if="!$ctrl.loading && !$ctrl.error && !$ctrl.success"><input type="file" nv-file-select="" uploader="$ctrl.uploader"><br>Select or drag a file</div><div ng-if="$ctrl.loading || $ctrl.error || $ctrl.success" class="text-center"><strong ng-if="$ctrl.loading">Загрузка<br>...</strong> <strong ng-if="$ctrl.error" class="text-danger">Error<br>{{$ctrl.errorMessage}}<br><a href="#" ng-click="$ctrl.repeat();">Retry</a></strong> <strong ng-if="$ctrl.success" class="text-success">Loaded<br>{{$ctrl.successMessage}}<br><a href="#" ng-click="$ctrl.repeat();">Load another</a></strong></div></div></div>'),e.put("app/side-client/endpoints/album/editor/editor.html",'<div class="back" ui-sref="albums"><span class="icon glyphicon glyphicon-chevron-left"></span></div><div class="editor container"><div ng-if="!$ctrl.savedResult"><h1>Create Album</h1><form class="form-horizontal" ng-submit="$ctrl.save($ctrl.album)" role="form"><div class="form-group"><label class="control-label col-sm-2" for="name">Album name:</label><div class="col-sm-10"><input type="text" class="form-control" id="name" ng-model="$ctrl.album.name"></div></div><div class="form-group"><label class="control-label col-sm-2" for="description">Album description:</label><div class="col-sm-10"><textarea class="form-control" id="description" ng-model="$ctrl.album.description"></textarea></div></div><div class="form-group"><label class="control-label col-sm-2">Image:</label><div class="col-sm-10"><load-file url="image/upload" callback="$ctrl.imageLoaded(response)"></load-file></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="submit" class="btn btn-default">Save</button></div></div></form></div><div class="saved-result" ng-if="$ctrl.savedResult == \'SUCCESS\'"><p class="success"><strong>Saved successfully</strong></p><a href="" ng-click="$ctrl.reload();">Create new</a></div><div class="saved-result" ng-if="$ctrl.savedResult == \'FAIL\'"><p class="fail"><strong>Error</strong></p><a href="" ng-click="$ctrl.reload();">Try again</a></div></div>'),
e.put("app/side-client/endpoints/album/list/list.html",'<div class="container" ng-if="$ctrl.initialized"><h1>Your Albums</h1><div class="list"><div class="item" ui-sref="photos({albumId: album.id, page: 0})" ng-repeat="album in $ctrl.albums"><img ng-src="{{album.image_url}}" title="{{album.title}}"><div class="on-hover"><div class="title">{{album.name}}</div><div class="description">{{album.description}}</div></div></div><div class="item edit" ui-sref="albumEditor({id:\'create\'})"><span class="icon glyphicon glyphicon-plus"></span></div></div><uib-pagination total-items="$ctrl.totalCount" items-per-page="$ctrl.itemsPerPage" ng-model="$ctrl.currentPage"></uib-pagination></div>'),e.put("app/side-client/endpoints/photo/editor/editor.html",'<div class="back" ui-sref="albums"><span class="icon glyphicon glyphicon-chevron-left"></span></div><div class="editor container"><div ng-if="!$ctrl.savedResult"><h1>Create Photo</h1><form class="form-horizontal" ng-submit="$ctrl.save($ctrl.photo)" role="form"><div class="form-group"><label class="control-label col-sm-2" for="name">Photo name:</label><div class="col-sm-10"><input type="text" class="form-control" id="name" ng-model="$ctrl.photo.name"></div></div><div class="form-group"><label class="control-label col-sm-2" for="description">Album description:</label><div class="col-sm-10"><textarea class="form-control" id="description" ng-model="$ctrl.photo.description"></textarea></div></div><div class="form-group"><label class="control-label col-sm-2">Image:</label><div class="col-sm-10"><load-file url="image/upload" callback="$ctrl.imageLoaded(response)"></load-file></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="submit" class="btn btn-default">Save</button></div></div></form></div><div class="saved-result" ng-if="$ctrl.savedResult == \'SUCCESS\'"><p class="success"><strong>Saved successfully</strong></p><a href="" ng-click="$ctrl.reload();">Create new</a></div><div class="saved-result" ng-if="$ctrl.savedResult == \'FAIL\'"><p class="fail"><strong>Error</strong></p><a href="" ng-click="$ctrl.reload();">Try again</a></div></div>'),e.put("app/side-client/endpoints/photo/list/list.html",'<div class="back" ui-sref="albums"><span class="icon glyphicon glyphicon-chevron-left"></span></div><div class="container" ng-if="$ctrl.initialized"><div class="header"><div class="col-xs-4"><img ng-src="{{$ctrl.album.image_url}}" title="{{$ctrl.album.name}}"></div><div class="col-xs-8"><h1>{{$ctrl.album.name}}</h1><div class="description">{{$ctrl.album.description}}</div></div></div><div class="list"><image-viewer image="photo.image_url" title="photo.name" description="photo.description" ng-repeat="photo in $ctrl.photos"><div class="item"><img ng-src="{{photo.image_url}}" title="{{photo.title}}"><div class="on-hover"><div class="title">{{photo.name}}</div><div class="description">{{photo.description}}</div></div></div></image-viewer><div class="item edit" ui-sref="photoEditor({photoId:\'create\', albumId: $ctrl.albumId})"><span class="icon glyphicon glyphicon-plus"></span></div></div><uib-pagination total-items="$ctrl.totalCount" items-per-page="$ctrl.itemsPerPage" ng-model="$ctrl.currentPage"></uib-pagination></div>')}]);